import {LineChart} from '@mui/x-charts';
import {Modal, ModalProps} from '..';
import {HassEntityWithService} from '@hakit/core';

type TemperatureModalProps = Omit<ModalProps, 'children'> & {
  entity: HassEntityWithService<'sensor'>;
};

export function TemperatureModal(props: TemperatureModalProps) {
  const {entity, ...modalProps} = props;

  let history = entity.history;

  //TODO implement history
  // eslint-disable-next-line @typescript-eslint/no-explicit-any
  history = HISTORY as any;

  const {series, xAxis} = history.entityHistory.reduce(
    (acc, item) => {
      acc.series.push(Number(item.s));
      acc.xAxis.push(new Date(item.lu * 1000).toLocaleString());
      return acc;
    },
    {series: [] as number[], xAxis: [] as string[]}
  );

  return (
    <Modal {...modalProps}>
      Temperature Modal
      <LineChart
        xAxis={[{scaleType: 'point', data: xAxis}]}
        series={[
          {
            data: series,
          },
        ]}
        width={1500}
        height={300}
      />
    </Modal>
  );
}

const HISTORY = {
  loading: false,
  timeline: [],
  entityHistory: [
    {
      s: '10.2',
      lu: 1711752159.897,
    },
    {
      s: '15.0',
      lu: 1711753059.897,
    },
    {
      s: '10.1',
      lu: 1711753959.897,
    },
    {
      s: '11.7',
      lu: 1711754859.897,
    },
    {
      s: '10.6',
      lu: 1711755759.897,
    },
    {
      s: '13.0',
      lu: 1711756659.897,
    },
    {
      s: '14.9',
      lu: 1711757559.897,
    },
    {
      s: '11.9',
      lu: 1711758459.897,
    },
    {
      s: '13.5',
      lu: 1711759359.897,
    },
    {
      s: '14.3',
      lu: 1711760259.897,
    },
    {
      s: '14.6',
      lu: 1711761159.897,
    },
    {
      s: '13.9',
      lu: 1711762059.897,
    },
    {
      s: '10.7',
      lu: 1711762959.897,
    },
    {
      s: '11.6',
      lu: 1711763859.897,
    },
    {
      s: '13.4',
      lu: 1711764759.897,
    },
    {
      s: '13.1',
      lu: 1711765659.897,
    },
    {
      s: '12.6',
      lu: 1711766559.897,
    },
    {
      s: '13.5',
      lu: 1711767459.897,
    },
    {
      s: '10.4',
      lu: 1711768359.897,
    },
    {
      s: '12.6',
      lu: 1711769259.897,
    },
    {
      s: '12.8',
      lu: 1711770159.897,
    },
    {
      s: '11.9',
      lu: 1711771059.897,
    },
    {
      s: '14.5',
      lu: 1711771959.897,
    },
    {
      s: '10.3',
      lu: 1711772859.897,
    },
    {
      s: '11.1',
      lu: 1711773759.897,
    },
    {
      s: '14.4',
      lu: 1711774659.897,
    },
    {
      s: '11.2',
      lu: 1711775559.897,
    },
    {
      s: '10.2',
      lu: 1711776459.897,
    },
    {
      s: '12.4',
      lu: 1711777359.897,
    },
    {
      s: '11.4',
      lu: 1711778259.897,
    },
    {
      s: '13.5',
      lu: 1711779159.897,
    },
    {
      s: '11.7',
      lu: 1711780059.897,
    },
    {
      s: '10.5',
      lu: 1711780959.897,
    },
    {
      s: '10.6',
      lu: 1711781859.897,
    },
    {
      s: '13.7',
      lu: 1711782759.897,
    },
    {
      s: '11.3',
      lu: 1711783659.897,
    },
    {
      s: '14.0',
      lu: 1711784559.897,
    },
    {
      s: '13.2',
      lu: 1711785459.897,
    },
    {
      s: '12.0',
      lu: 1711786359.897,
    },
    {
      s: '12.6',
      lu: 1711787259.897,
    },
    {
      s: '11.9',
      lu: 1711788159.897,
    },
    {
      s: '11.5',
      lu: 1711789059.897,
    },
    {
      s: '14.2',
      lu: 1711789959.897,
    },
    {
      s: '11.1',
      lu: 1711790859.897,
    },
    {
      s: '10.3',
      lu: 1711791759.897,
    },
    {
      s: '14.3',
      lu: 1711792659.897,
    },
    {
      s: '14.9',
      lu: 1711793559.897,
    },
    {
      s: '10.6',
      lu: 1711794459.897,
    },
    {
      s: '14.3',
      lu: 1711795359.897,
    },
    {
      s: '13.3',
      lu: 1711796259.897,
    },
    {
      s: '10.6',
      lu: 1711797159.897,
    },
    {
      s: '12.5',
      lu: 1711798059.897,
    },
    {
      s: '12.2',
      lu: 1711798959.897,
    },
    {
      s: '11.6',
      lu: 1711799859.897,
    },
    {
      s: '14.8',
      lu: 1711800759.897,
    },
    {
      s: '10.5',
      lu: 1711801659.897,
    },
    {
      s: '14.6',
      lu: 1711802559.897,
    },
    {
      s: '11.0',
      lu: 1711803459.897,
    },
    {
      s: '12.0',
      lu: 1711804359.897,
    },
    {
      s: '10.6',
      lu: 1711805259.897,
    },
    {
      s: '11.9',
      lu: 1711806159.897,
    },
    {
      s: '11.6',
      lu: 1711807059.897,
    },
    {
      s: '14.4',
      lu: 1711807959.897,
    },
    {
      s: '13.6',
      lu: 1711808859.897,
    },
    {
      s: '14.9',
      lu: 1711809759.897,
    },
    {
      s: '14.9',
      lu: 1711810659.897,
    },
    {
      s: '10.2',
      lu: 1711811559.897,
    },
    {
      s: '11.0',
      lu: 1711812459.897,
    },
    {
      s: '14.8',
      lu: 1711813359.897,
    },
    {
      s: '13.7',
      lu: 1711814259.897,
    },
    {
      s: '14.3',
      lu: 1711815159.897,
    },
    {
      s: '11.4',
      lu: 1711816059.897,
    },
    {
      s: '13.4',
      lu: 1711816959.897,
    },
    {
      s: '13.8',
      lu: 1711817859.897,
    },
    {
      s: '14.8',
      lu: 1711818759.897,
    },
    {
      s: '14.6',
      lu: 1711819659.897,
    },
    {
      s: '11.9',
      lu: 1711820559.897,
    },
    {
      s: '10.8',
      lu: 1711821459.897,
    },
    {
      s: '12.7',
      lu: 1711822359.897,
    },
    {
      s: '12.1',
      lu: 1711823259.897,
    },
    {
      s: '12.2',
      lu: 1711824159.897,
    },
    {
      s: '13.4',
      lu: 1711825059.897,
    },
    {
      s: '11.6',
      lu: 1711825959.897,
    },
    {
      s: '13.8',
      lu: 1711826859.897,
    },
    {
      s: '10.7',
      lu: 1711827759.897,
    },
    {
      s: '10.2',
      lu: 1711828659.897,
    },
    {
      s: '14.0',
      lu: 1711829559.897,
    },
    {
      s: '11.2',
      lu: 1711830459.897,
    },
    {
      s: '13.4',
      lu: 1711831359.897,
    },
    {
      s: '11.8',
      lu: 1711832259.897,
    },
    {
      s: '13.6',
      lu: 1711833159.897,
    },
    {
      s: '14.7',
      lu: 1711834059.897,
    },
    {
      s: '13.9',
      lu: 1711834959.897,
    },
    {
      s: '13.7',
      lu: 1711835859.897,
    },
    {
      s: '15.0',
      lu: 1711836759.897,
    },
    {
      s: '13.7',
      lu: 1711837659.897,
    },
    {
      s: '13.9',
      lu: 1711838559.897,
    },
    {
      s: '13.9',
      lu: 1711839459.897,
    },
    {
      s: '14.9',
      lu: 1711840359.897,
    },
    {
      s: '11.3',
      lu: 1711841259.897,
    },
  ],
  coordinates: [
    [0, 59.316326530612244],
    [21.73913043478261, 29.846938775510218],
    [43.47826086956522, 29.03061224489796],
    [65.21739130434783, 40.459183673469376],
    [86.95652173913044, 46.17346938775511],
    [108.69565217391305, 52.295918367346914],
    [130.43478260869566, 50.66326530612247],
    [152.17391304347825, 55.15306122448982],
    [173.91304347826087, 44.94897959183675],
    [195.6521739130435, 44.540816326530624],
    [217.3913043478261, 55.15306122448982],
    [239.1304347826087, 26.58163265306119],
    [260.8695652173913, 49.03061224489798],
    [282.60869565217394, 37.19387755102041],
    [304.3478260869565, 61.683673469387756],
    [326.0869565217391, 24.948979591836732],
    [347.82608695652175, 39.64285714285712],
    [369.5652173913044, 31.887755102040828],
    [391.304347826087, 22.499999999999993],
    [413.04347826086956, 52.29591836734694],
    [434.7826086956522, 45.357142857142854],
    [456.5217391304348, 48.21428571428572],
    [478.2608695652174, 26.989795918367378],
    [500, 17.602040816326536],
    [521.7391304347826, 29.166666666666657],
    [500, 29.166666666666657],
  ],
};
